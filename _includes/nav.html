{% assign is_english = false %}
{% if page.url contains '/en/' or page.lang == 'en' %}
  {% assign is_english = true %}
{% endif %}

<nav class="site-nav">
  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger">
    <span class="menu-icon">
      <svg viewBox="0 0 18 15" width="18px" height="15px">
        <path d="m18,1.484c0,0.82-0.665,1.484-1.484,1.484h-15.032c-0.819,0-1.484-0.665-1.484-1.484s0.665-1.484,1.484-1.484h15.032c0.819,0,1.484,0.665,1.484,1.484zm0,5.16c0,0.82-0.665,1.484-1.484,1.484h-15.032c-0.819,0-1.484-0.665-1.484-1.484s0.665-1.484,1.484-1.484h15.032c0.819,0,1.484,0.665,1.484,1.484zm0,5.158c0,0.82-0.665,1.484-1.484,1.484h-15.032c-0.819,0-1.484-0.665-1.484-1.484s0.665-1.484,1.484-1.484h15.032c0.819,0,1.484,0.665,1.484,1.484z"/>
      </svg>
    </span>
  </label>

  <div class="trigger">
    {% if is_english %}
      <a class="page-link" href="{{ '/en/' | relative_url }}">Home</a>
      <a class="page-link" href="{{ '/en/about/' | relative_url }}">About</a>
      <a class="page-link" href="{{ '/en/research/' | relative_url }}">Research</a>
      <a class="page-link" href="{{ '/en/publications/' | relative_url }}">Publications</a>
      <a class="page-link" href="{{ '/en/teaching/' | relative_url }}">Teaching</a>
      <a class="page-link" href="{{ '/en/contact/' | relative_url }}">Contact</a>
    {% else %}
      <a class="page-link" href="{{ '/' | relative_url }}">Accueil</a>
      <a class="page-link" href="{{ '/parcours/' | relative_url }}">Mon Parcours</a>
      <a class="page-link" href="{{ '/recherche/' | relative_url }}">Recherche</a>
      <a class="page-link" href="{{ '/publications/' | relative_url }}">Publications</a>
      <a class="page-link" href="{{ '/enseignement/' | relative_url }}">Enseignement</a>
      <a class="page-link" href="{{ '/contact/' | relative_url }}">Contact</a>
    {% endif %}
    
    <span class="language-selector">
      {% if is_english %}
        <a class="lang-link" href="{{ page.url | replace: '/en/', '/' | relative_url }}" title="Version française">FR</a>
        <span>|</span>
        <span class="lang-link active" title="Version anglaise">EN</span>
      {% else %}
        <span class="lang-link active" title="Version française">FR</span>
        <span>|</span>
        <a class="lang-link" href="{{ '/en' | append: page.url | relative_url }}" title="English version">EN</a>
      {% endif %}
    </span>
  </div>
</nav>

<style>
.language-selector {
  border-left: 1px solid #e8e8e8;
  padding-left: 10px;
  margin-left: 10px;
}

.language-selector .lang-link {
  text-decoration: none;
  margin: 0 2px;
}

.language-selector .lang-link.active {
  font-weight: bold;
  text-decoration: underline;
}

.language-selector .lang-link:not(.active) {
  opacity: 0.7;
}
</style>
